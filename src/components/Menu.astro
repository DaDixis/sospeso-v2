---

import { fetchMenuFromSheet } from '../lib/menu';

// This runs at build time only - zero runtime cost!
const menuCategories = await fetchMenuFromSheet();
---

<section id="meny" class="p-4 sm:p-6 lg:p-8 scroll-mt-8">
		
	<div class="max-w-4xl mx-auto">
		<!-- Section Header -->
		<h2 class="text-3xl sm:text-4xl tracking-tight text-foreground mb-6 sm:mb-8 text-center font-display">
			VÃ¥r Meny
		</h2>
		
		<!-- Wooden frame wrapper -->
		<div class="wood-frame rounded-2xl overflow-hidden shadow-xl p-3 sm:p-4 lg:p-5">
			
			<!-- Chalkboard -->
			<div class="chalkboard rounded-lg py-8 sm:py-10 px-6 sm:px-10 lg:px-14">
				
				{menuCategories.map((category, index) => (
					<div class={index < menuCategories.length - 1 ? "mb-8 sm:mb-10" : "mb-10"}>
						<h3 class="menu-header">#{category.category}</h3>
						<div class="space-y-3">
							{category.items.map((item) => (
								<div class="menu-item">
									<span class="menu-name">{item.name}</span>
									<span class="menu-dots"></span>
									<span class="menu-price">{item.price}</span>
								</div>
							))}
						</div>
					</div>
				))}
				
				<!-- Footnote -->
				<p class="text-sm text-[#faf8f5]/60 italic mt-6" style="font-family: 'Gochi Hand', cursive;">
					* Dubbel espresso +10 kr
				</p>
			</div>
		</div>
	</div>
</section>

<style>
	/* Gochi Hand font - loaded only when Menu component is used */
	@font-face {
	  font-family: 'Gochi Hand';
	  src: url('/fonts/GochiHand-Regular.woff2') format('woff2'),
	       url('/fonts/GochiHand-Regular.ttf') format('truetype');
	  font-weight: 400;
	  font-style: normal;
	  font-display: optional;
	}

	.wood-frame {
		background: linear-gradient(135deg, #a08060 0%, #8b7355 25%, #7a6548 50%, #8b7355 75%, #a08060 100%);
	}
	
	.chalkboard {
		background-color: #1a1a1a;
		background-image: 
			radial-gradient(ellipse at 20% 30%, rgba(255,255,255,0.02) 0%, transparent 50%),
			radial-gradient(ellipse at 80% 70%, rgba(255,255,255,0.015) 0%, transparent 50%),
			linear-gradient(180deg, #222 0%, #1a1a1a 30%, #151515 100%);
		box-shadow: inset 0 0 60px rgba(0,0,0,0.5), inset 0 0 3px rgba(255,255,255,0.03);
	}
	
	.menu-header {
		font-family: 'Gochi Hand', cursive;
		font-size: 1.75rem;
		color: #faf8f5;
		margin-bottom: 1.25rem;
		letter-spacing: 0.02em;
	}
	
	@media (min-width: 640px) {
		.menu-header {
			font-size: 2rem;
		}
	}
	
	.menu-item {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: 0.5rem 0;
		border-bottom: 1px solid rgba(250, 248, 245, 0.15);
		gap: 0.5rem;
		color: #faf8f5;
		transition: all 0.3s ease;
		cursor: pointer;
	}
	
	.menu-item:hover {
		transform: translateX(4px);
		color: #ffffff;
		text-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
		border-bottom-color: rgba(250, 248, 245, 0.25);
	}
	
	.menu-item:last-child {
		border-bottom: none;
	}
	
	.menu-name {
		font-weight: 500;
		letter-spacing: 0.05em;
		text-transform: uppercase;
		white-space: nowrap;
		color: #faf8f5;
	}
	
	.menu-dots {
		flex-grow: 1;
		border-bottom: 2px dotted rgba(250, 248, 245, 0.3);
		margin: 0 0.75rem;
		margin-bottom: 0.3rem;
	}
	
	.menu-price {
		font-weight: 400;
		white-space: nowrap;
		color: #faf8f5;
	}
</style>
